<app-dashboard-layout title="Accounts" subtitle="View and manage user accounts">
  <div class="flex items-center justify-between mb-4">
    <div class="flex gap-2">
      <input
        type="text"
        class="border rounded px-3 py-2 text-sm h-10 !w-80"
        placeholder="Search by name, email, or mobile"
        [(ngModel)]="searchTerm"
      />
    </div>
    <button
      type="button"
      class="bg-blue-600 text-white px-4 py-2 h-10 rounded"
      (click)="openCreateUserModal()"
    >
      Create User
    </button>
  </div>
  <div class="overflow-x-auto">
    <table class="min-w-full border-separate border-spacing-0 bg-transparent">
      <thead>
        <tr>
          <th class="px-4 py-2 font-medium text-left">Name</th>
          <th class="px-4 py-2 font-medium text-left">Email</th>
          <th class="px-4 py-2 font-medium text-left">Mobile Number</th>
          <th class="px-4 py-2 font-medium text-left">User Type</th>
          <th class="px-4 py-2 font-medium text-left">Address</th>
          <th class="px-4 py-2 font-medium text-left">Birthdate</th>
          <th class="px-4 py-2 font-medium text-left">Barangay Clearance</th>
          <th class="px-4 py-2 font-medium text-left">Created At</th>
          <th class="px-4 py-2 font-medium text-left">Updated At</th>
          <th class="px-4 py-2 font-medium text-left">Actions</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngIf="users as users">
          <tr *ngIf="filteredUsers.length === 0">
            <td colspan="10" class="py-8 text-center text-gray-400">
              <svg
                width="48"
                height="48"
                fill="none"
                viewBox="0 0 24 24"
                class="mx-auto mb-2"
              >
                <circle
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="#cbd5e1"
                  stroke-width="2"
                />
                <path
                  d="M8 12h8M12 8v8"
                  stroke="#cbd5e1"
                  stroke-width="2"
                  stroke-linecap="round"
                />
              </svg>
              No data
            </td>
          </tr>
          <tr
            *ngFor="let user of filteredUsers"
            [hidden]="user._id === currentUserId"
          >
            <td class="px-4 py-2">{{ user.name }}</td>
            <td class="px-4 py-2">{{ user.email }}</td>
            <td class="px-4 py-2">{{ user.mobile_number }}</td>
            <td class="px-4 py-2">
              <span
                class="px-2 py-1 text-yellow-700 border border-yellow-400 rounded-full bg-yellow-50 text-xs font-semibold capitalize"
              >
                {{ user.user_type }}
              </span>
            </td>
            <td class="px-4 py-2">{{ user.address }}</td>
            <td class="px-4 py-2">{{ user.birthdate | date : "longDate" }}</td>
            <td class="px-4 py-2">{{ user.barangay_clearance }}</td>
            <td class="px-4 py-2">{{ user.createdAt | date : "medium" }}</td>
            <td class="px-4 py-2">{{ user.updatedAt | date : "medium" }}</td>
            <td class="px-4 py-2">
              <button
                type="button"
                class="px-3 py-1 text-blue-600 hover:underline bg-transparent shadow-none border-none outline-none mr-2"
                (click)="editUser(user)"
              >
                Edit
              </button>
              <button
                type="button"
                class="px-3 py-1 text-red-600 hover:underline bg-transparent shadow-none border-none outline-none"
                (click)="deleteUser(user)"
              >
                Delete
              </button>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</app-dashboard-layout>
